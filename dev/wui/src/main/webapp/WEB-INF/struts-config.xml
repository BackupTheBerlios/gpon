<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
	<data-sources />
	<form-beans>
		<form-bean name="SimpleItemTypeIdForm"
			type="de.berlios.gpon.wui.forms.SimpleItemTypeIdForm" />
		<form-bean name="SimpleItemIdForm"
			type="de.berlios.gpon.wui.forms.SimpleItemIdForm" />
		<form-bean name="ItemTypeForm"
			type="de.berlios.gpon.wui.forms.ItemTypeForm" />
		<form-bean name="AssociationTypeForm"
			type="de.berlios.gpon.wui.forms.AssociationTypeForm" />


		<form-bean name="ItemSearchForm"
			type="de.berlios.gpon.wui.forms.ItemSearchForm" />
		<form-bean name="ItemFulltextSearchForm"
			type="de.berlios.gpon.wui.forms.ItemFulltextSearchForm" />
		<form-bean name="ItemForm"
			type="de.berlios.gpon.wui.forms.ItemForm" />

		<!--  educational for gpon developers -->
		<form-bean name="TestForm" type="de.berlios.gpon.wui.edu.TestForm" />
	</form-beans>
	<global-exceptions />

	<action-mappings>
		<action path="/test"
			type="de.berlios.gpon.wui.actions.TestAction">
			<forward name="success" path="/test.jsp" />
		</action>
		
		<action path="/model/intro"
				forward="/model/index.jsp"/>
		
		<!--
			_ _                   _
			(_) |_ ___ _ __ ___   | |_ _   _ _ __   ___
			| | __/ _ \ '_ ` _ \  | __| | | | '_ \ / _ \
			| | ||  __/ | | | | | | |_| |_| | |_) |  __/
			|_|\__\___|_| |_| |_|  \__|\__, | .__/ \___|
			|___/|_|
		-->
		<!--  add -->
		<action path="/model/it/new"
			type="de.berlios.gpon.wui.actions.model.ItemTypeCreateAction"
			name="ItemTypeForm" scope="session">
			<forward name="success" path="/model/it/newSuccess.jsp" />
			<forward name="error" path="/model/it/newError.jsp" />
		</action>

		<!-- edit -->
		<!-- preselects item type -->

		<action path="/model/it/pre-edit"
			type="de.berlios.gpon.wui.actions.model.ItemTypeSelectAction">
			<forward name="success" path="/model/it/edit.jsp" />
			<forward name="error" path="/model/it/list.jsp" />
		</action>

		<!--  does the changes -->
		<action path="/model/it/edit" name="ItemTypeForm"
			attribute="selectedItemTypeForm" input="/model/it/edit.jsp"
			scope="session"
			type="de.berlios.gpon.wui.actions.model.ItemTypeEditAction">
			<forward name="success" path="/model/it/editSuccess.jsp" />
			<forward name="error" path="/model/it/editError.jsp" />
		</action>


		<!--  delete -->

		<!--  preselect  -->
		<action path="/model/it/pre-delete" input="/model/it/list.jsp"
			type="de.berlios.gpon.wui.actions.model.ItemTypeSelectAction">
			<forward name="success" path="/model/it/delete.jsp" />
			<forward name="error" path="/model/it/list.jsp" />
		</action>

		<!--  delete -->
		<action path="/model/it/delete" name="ItemTypeForm"
			input="/model/it/delete.jsp" scope="request"
			type="de.berlios.gpon.wui.actions.model.ItemTypeDeleteAction">
			<forward name="success" path="/model/it/deleteSuccess.jsp" />
			<forward name="error" path="/model/it/deleteError.jsp" />
		</action>

		<!-- 
			_       _   _               _
			__ _ ___ ___  ___   ___(_) __ _| |_(_) ___  _ __   | |_ _   _ _ __   ___
			/ _` / __/ __|/ _ \ / __| |/ _` | __| |/ _ \| '_ \  | __| | | | '_ \ / _ \
			| (_| \__ \__ \ (_) | (__| | (_| | |_| | (_) | | | | | |_| |_| | |_) |  __/
			\__,_|___/___/\___/ \___|_|\__,_|\__|_|\___/|_| |_|  \__|\__, | .__/ \___|
			|___/|_|
		-->

		<action path="/model/at/new" input="/model/at/new.jsp"
			scope="session"
			type="de.berlios.gpon.wui.actions.model.AssociationTypeCreateAction"
			name="AssociationTypeForm">
			<forward name="success" path="/model/at/newSuccess.jsp" />
			<forward name="error" path="/model/at/newError.jsp" />
		</action>

		<action path="/model/at/pre-edit" input="/model/at/list.jsp"
			type="de.berlios.gpon.wui.actions.model.AssociationTypeSelectAction">
			<forward name="success" path="/model/at/edit.jsp" />
			<forward name="error" path="/model/at/list.jsp" />
		</action>

		<action name="AssociationTypeForm" path="/model/at/edit"
			attribute="selectedAssociationTypeForm" input="/model/at/edit.jsp"
			scope="session"
			type="de.berlios.gpon.wui.actions.model.AssociationTypeEditAction">
			<forward name="success" path="/model/at/editSuccess.jsp" />
			<forward name="error" path="/model/at/editError.jsp" />
		</action>

		<action path="/model/at/pre-delete" input="/model/at/list.jsp"
			type="de.berlios.gpon.wui.actions.model.AssociationTypeSelectAction">
			<forward name="success" path="/model/at/delete.jsp" />
			<forward name="error" path="/model/at/list.jsp" />
		</action>

		<action name="AssociationTypeForm" path="/model/at/delete"
			input="/model/at/delete.jsp" scope="request"
			type="de.berlios.gpon.wui.actions.model.AssociationTypeDeleteAction">
			<forward name="success" path="/model/at/deleteSuccess.jsp" />
			<forward name="error" path="/model/at/deleteError.jsp" />
		</action>

		<!--  educational -->

		<action name="TestForm" path="/test/form"
			type="de.berlios.gpon.wui.edu.TestAction">
			<forward name="success" path="/testform.jsp" />
		</action>



		<!-- data search -->
		
		<action path="/data/search/intro"
				forward="/data/search/search.jsp"/>
				
		<action path="/data/search/backFromCrud"
				forward="/data/search/search.do"/>
				
		
		<action path="/data/search/pre-searchDialog"
			type="de.berlios.gpon.wui.actions.data.PrepareItemSearchAction"
			name="SimpleItemTypeIdForm">
			<forward name="success"
				path="/data/search/search.jsp?dialog=true" />
		</action>

		<action name="ItemSearchForm" path="/data/search/search"
			type="de.berlios.gpon.wui.actions.data.ItemSearchAction"
			scope="session">
			<forward name="success"
				path="/data/search/search.jsp?result=true" />
		</action>


		<!--  item creation -->
		<action path="/data/pre-create"
			type="de.berlios.gpon.wui.actions.data.ItemPreCreateAction"
			name="SimpleItemTypeIdForm">
			<forward name="success" path="/data/new.jsp" />
		</action>

		<action path="/data/create"
			type="de.berlios.gpon.wui.actions.data.ItemCreateAction" scope="session"
			input="/data/new.jsp" name="ItemForm">
			<forward name="success" path="/data/newSuccess.jsp" />
			<forward name="error" path="/data/newError.jsp" />
		</action>

		<!-- item edit -->
		<action path="/data/search/pre-edit"
			forward="/data/pre-edit.do" />

		<action path="/data/pre-edit"
			type="de.berlios.gpon.wui.actions.data.ItemSelectAction"
			name="ItemForm">
			<forward name="success" path="/data/edit.jsp" />
		</action>

		<action path="/data/edit"
			type="de.berlios.gpon.wui.actions.data.ItemEditAction"
			input="/data/edit.jsp" name="ItemForm">
			<forward name="success" path="/data/editSuccess.jsp" />
			<forward name="error" path="/data/editError.jsp" />
		</action>


		<!--  item, good bye -->

		<action path="/data/search/pre-delete"
			forward="/data/pre-delete.do" />

		<action path="/data/pre-delete"
			type="de.berlios.gpon.wui.actions.data.ItemSelectAction"
			name="ItemForm">
			<forward name="success" path="/data/delete.jsp" />
		</action>

		<action path="/data/delete"
			type="de.berlios.gpon.wui.actions.data.ItemDeleteAction" scope="session"
			input="/data/delete.jsp" name="ItemForm">
			<forward name="success" path="/data/deleteSuccess.jsp" />
			<forward name="error" path="/data/deleteError.jsp" />
		</action>


		<!-- JSON stuff -->

		<action path="/ajax/suggestItems"
			type="de.berlios.gpon.wui.actions.data.ItemFulltextSearchAction"
			scope="request" name="ItemFulltextSearchForm">
			<forward name="success" path="/ajax/suggest-json.jsp" />
		</action>

		<action path="/ajax/getItem" scope="request"
			type="de.berlios.gpon.wui.actions.data.ItemSelectAction"
			name="ItemForm">
			<forward name="success" path="/ajax/item-json.jsp" />
		</action>


	</action-mappings>



	<controller debug="10" locale="true" />
	<message-resources parameter="de.berlios.gpon.wui.ApplicationResources" />
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
		<set-property property="pathnames"
			value="/WEB-INF/struts-validation.xml" />
	</plug-in>
	<plug-in className="net.sf.navigator.menu.MenuPlugIn">
		<set-property property="menuConfig"
			value="/WEB-INF/menu-config.xml" />
	</plug-in>
</struts-config>
