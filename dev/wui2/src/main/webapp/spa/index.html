<html>
<head>
<link rel="stylesheet" href="gpon-spa.css" type="text/css"/>
<script type="text/javascript" src="../scripts/mootools/mootools.v1.00.js"></script>
<script type="text/javascript" src="GPON.js" charset="ISO-8859-1"></script>
<script type="text/javascript" src="GPON-testdata.js" charset="ISO-8859-1"></script>
<script type="text/javascript">
var config = 
{
  debug: false
}

function log(message) 
{
 if (config.debug) {
  $('log').appendText(message);
  $('log').appendChild(new Element('br'));
 }
}

function startup() 
{
  log('start');
  
  function createWindow(title, content) 
  {
    var windowNode = new Element('div');
    windowNode.addClass('dragable');
    windowNode.addClass('formWindow');
    titlebar = new Element('div');
    titlebar.injectInside(windowNode);
    titlebar.addClass('formWindowTitle');
    titlebar.setHTML(title);
    windowNode.__gpon_dragHandle=titlebar;
    content.injectInside(windowNode);  
    return windowNode;
  }
  
  function addElement(element) 
  {
  	element.injectInside($('out'));
  }
  
  // with a form inside
  var form1 = new GPON.Form(getSamplePropHandleSet());
  var form2 = new GPON.Form(getSamplePropHandleSet());

  // 2 windows
  window1 = createWindow('Window 1', form1.asInputFormElement());
  window2 = createWindow('Window 2', form2.asInputFormElement());
  
  addElement(window1);
  addElement(window2);
  /*
  * 3 layers:
  *   top: while dragging
  *   between: just after drag
  *   bottom: on drag start other windows will go here
  */
  $$('.dragable').each(function(el) { 
    el.makeDraggable(
    {
      handle: el.__gpon_dragHandle,
      onStart: function() 
       {
         $$('.dragable').each(function(iel) 
         {
           iel.removeClass('onTop');
           iel.removeClass('inBetween');
           iel.addClass('onBottom');
         });
         this.element.removeClass('onBottom');
         this.element.addClass('onTop');
       },
      onComplete: function() 
       {
         this.element.removeClass('onTop');
         this.element.addClass('inBetween');
       }
    }
    
    
    ); });
  
}

window.onload = startup;

</script>
</head>
<body>
<div id="log"></div>
<div id="out"></div>
</body>
</html>
